<!--tabs-->
<!--{"http://vadev.mantech.com:4848/manager"=>{"isaac-rest"=>{:context=>"/isaac-rest", :state=>"running", :session_count=>"0"}, "ROOT"=>{:context=>"/", :state=>"running", :session_count=>"0"}, "rails_komet-1.3-a"=>{:context=>"/rails_komet-1.3-a", :state=>"running", :session_count=>"0"}, "rails_komet-1.3-b"=>{:context=>"/rails_komet-1.3-b", :state=>"stopped", :session_count=>"0"}, "rails_komet_a"=>{:context=>"/rails_komet_a", :state=>"running", :session_count=>"0"}, "/usr/share/tomcat7-admin/host-manager"=>{:context=>"/host-manager", :state=>"running", :session_count=>"0"}, "cargo_deploy"=>{:context=>"/cargo_deploy", :state=>"running", :session_count=>"0"}, "isaac-rest-1.0.1"=>{:context=>"/isaac-rest-1.0.1", :state=>"running", :session_count=>"0"}, "/usr/share/tomcat7-admin/manager"=>{:context=>"/manager", :state=>"running", :session_count=>"0"}, "isaac-rest-1.0"=>{:context=>"/isaac-rest-1.0", :state=>"running", :session_count=>"0"}}, "http://localhost:8080/manager"=>{:failed=>"Connection refused - Connection refused"}}-->
<div id="tabs">
  <ul>
    <li><a href='#tp-deployments'>Deployments</a></li>
    <li><a href='#tp-job_queue'>Job Queue</a></li>
  </ul>
  <div id="tp-deployments">
    <%= render partial: 'deployments' %>

  </div>
  <div id="tp-job_queue">
    <%= render partial: 'job_queue' %>
  </div>
</div>

<script>
  var myDataSource = {
    allOfTheData: null,
    pageSize: 15,
    getRows: function(params) {
      console.log('asking for ' + params.startRow + ' to ' + params.endRow);
      //setTimeout( function() {
        // take a chunk of the array, matching the start and finish times
        var rowsThisPage = myDataSource.allOfTheData.slice(params.startRow, params.endRow);
        // see if we have come to the last page. if we have, set lastRow to
        // the very last row of the last page. if you are getting data from
        // a server, lastRow could be returned separately if the lastRow
        // is not in the current page.
        var lastRow = -1;
        if (myDataSource.allOfTheData.length <= params.endRow) {
          lastRow = myDataSource.allOfTheData.length;
        }
        params.successCallback(rowsThisPage, lastRow);
      //}, 0);
    },
  };
  // setup the grid after the page has finished loading
  $(document).ready(function () {
    $("#tabs").tabs();

    var gridDiv = document.querySelector("#queue_list_div");
    var mainGrid =  new agGrid.Grid(gridDiv, gridOptions);
    poll();

    //register for polling
    polling.registerController('welcome', poll, 5000);
  });
</script>